{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\Script\\login/assets\\Script\\login\\loginView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\login","sourcesContent":["import {ManagerWindow} from \"../module/ManagerWindow\"\r\nimport { ManagerNotice } from \"../module/ManagerNotice\"\r\nimport { gameProtocol } from \"../game/gameProtocol\"\r\nimport GameInfo from \"../module/GameInfo\"\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class loginView extends cc.Component {\r\n\r\n    @property(cc.Prefab)\r\n    signInPanelPre: cc.Prefab = null;\r\n\r\n    @property(cc.Prefab)\r\n    rolePanelPre: cc.Prefab = null;\r\n\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    private rolePanelNode:any=null;\r\n    onLoad () {\r\n        this.initEvent();\r\n        cc.log(GameInfo.getInstance().returnjustLeftStatus())\r\n        if(GameInfo.getInstance().returnjustLeftStatus()){\r\n            this.showRolePanelPre()\r\n        }\r\n        else{\r\n            ManagerWindow.getInstance().show(this.signInPanelPre)\r\n        }\r\n        \r\n    }\r\n\r\n    onDestroy(){\r\n        this.clearEvent()\r\n    }\r\n\r\n    private initEvent() {\r\n        cc.systemEvent.on(gameProtocol.event.showRolePanel, this.showRolePanelPre, this);\r\n        cc.systemEvent.on(gameProtocol.event.showLeftMenu, this._onShowleftMenu, this);\r\n        cc.systemEvent.on(gameProtocol.event.playGame, this.onClickPlayBtn, this);\r\n    }\r\n\r\n    private clearEvent() {\r\n        cc.systemEvent.off(gameProtocol.event.showRolePanel, this.showRolePanelPre, this);\r\n        cc.systemEvent.off(gameProtocol.event.showLeftMenu, this._onShowleftMenu, this);\r\n        cc.systemEvent.off(gameProtocol.event.playGame, this.onClickPlayBtn, this);\r\n    }\r\n    \r\n    start () {\r\n        ManagerWindow.getInstance();\r\n        ManagerNotice.getInstance();\r\n    }\r\n\r\n    showRolePanelPre(){\r\n        ManagerWindow.getInstance().removeAll();\r\n        this.rolePanelNode=cc.instantiate(this.rolePanelPre)\r\n        this.rolePanelNode.parent=this.node;\r\n\r\n        //隐藏logo显示左侧菜单\r\n        cc.find('bg/logo',this.node).active=false\r\n        this._onShowleftMenu()\r\n    }\r\n\r\n    onClickPlayBtn(){\r\n        let _roleAniName=this.rolePanelNode.getComponent('rolePanel').roleAniName\r\n        let _roleWeaponName=this.rolePanelNode.getComponent('rolePanel').roleWeaponName\r\n        let _roleHealthValue=this.rolePanelNode.getComponent('rolePanel').roleHealthValue\r\n        GameInfo.getInstance().initRoleInfo(_roleAniName,_roleWeaponName,_roleHealthValue)\r\n        \r\n        cc.director.loadScene('battle')\r\n    }\r\n    // update (dt) {}\r\n    _onShowleftMenu(){\r\n        this.moveLeftMenu('show')\r\n    }\r\n\r\n    moveLeftMenu(type){\r\n        let leftMenuNode=cc.find('leftMenu',this.node);\r\n\r\n        let size=leftMenuNode.getContentSize();\r\n        //从屏幕左侧缓慢进入\r\n        let from_pos = cc.v2(-cc.winSize.width / 2-size.width/2, 0);\r\n        let to_pos = cc.v2(from_pos.x + size.width, 0);\r\n\r\n        let action=null;\r\n        let callFun=null;\r\n\r\n        if(type=='show'){\r\n            leftMenuNode.active=true;\r\n            action=cc.moveTo(0.5, to_pos);\r\n            callFun=cc.callFunc(() => {\r\n                \r\n            })\r\n        }\r\n        if(type=='hide'){\r\n            action=cc.moveTo(0.5, from_pos)\r\n            callFun=cc.callFunc(() => {\r\n                leftMenuNode.active=false;\r\n            })\r\n        }\r\n        \r\n        leftMenuNode.runAction(cc.sequence(action,callFun))\r\n    }\r\n\r\n    \r\n}\r\n"]}