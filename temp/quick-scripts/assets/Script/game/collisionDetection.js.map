{"version":3,"sources":["collisionDetection.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,+CAA6C;AACvC,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAAgD,sCAAY;IAD5D;QAAA,qEAgDC;QA3CW,YAAM,GAAY,IAAI,CAAC;QACvB,UAAI,GAAY,IAAI,CAAC;QAErB,gBAAU,GAAW,CAAC,CAAA;QAsB9B,aAAO,GAAY,KAAK,CAAA;;IAkB5B,CAAC;IAvCG,mCAAM,GAAN;QACI,EAAE,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC,OAAO,GAAG,IAAI,CAAC;QACjD,UAAU;QACV,4DAA4D;QAC5D,IAAI,CAAC,UAAU,GAAG,2BAAY,CAAC,WAAW,CAAC,UAAU,CAAC;IAC1D,CAAC;IACD,kCAAK,GAAL;IAEA,CAAC;IAED,uCAAU,GAAV;QACI,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;IAC9C,CAAC;IAED,qCAAQ,GAAR;QACI,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;IAC1C,CAAC;IAED,iCAAI,GAAJ;QACI,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,QAAQ,CAAC,mBAAmB,EAAE,CAAC,OAAO,CAAC,CAAA;IACrD,CAAC;IAED,4CAAe,GAAf;QACI,IAAI,IAAI,CAAC,OAAO;YAAE,OAAO;QACzB,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,GAAG,EAAE,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE;YACrF,OAAM;SACT;aACI;YACD,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,WAAW,GAAG,2BAAY,CAAC,WAAW,CAAC,UAAU,CAAC,MAAM,CAAC;YAC9F,IAAI,CAAC,OAAO,GAAG,IAAI,CAAA;SACtB;IACL,CAAC;IAID,mCAAM,GAAN;QACI,4BAA4B;QAC5B,IAAI,CAAC,eAAe,EAAE,CAAA;IAC1B,CAAC;IA9CgB,kBAAkB;QADtC,OAAO;OACa,kBAAkB,CA+CtC;IAAD,yBAAC;CA/CD,AA+CC,CA/C+C,EAAE,CAAC,SAAS,GA+C3D;kBA/CoB,kBAAkB","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\game","sourcesContent":["import { gameProtocol } from \"./gameProtocol\"\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class collisionDetection extends cc.Component {\r\n\r\n\r\n\r\n    private player: cc.Node = null;\r\n    private boss: cc.Node = null;\r\n\r\n    private patrolArea: number = 0\r\n    onLoad() {\r\n        cc.director.getCollisionManager().enabled = true;\r\n        //碰撞组件边线可见\r\n        //cc.director.getCollisionManager().enabledDebugDraw = true;\r\n        this.patrolArea = gameProtocol.bossControl.patrolArea;\r\n    }\r\n    start() {\r\n\r\n    }\r\n\r\n    initPlayer() {\r\n        this.player = cc.find('Player', this.node)\r\n    }\r\n\r\n    initBoss() {\r\n        this.boss = cc.find('boss', this.node)\r\n    }\r\n\r\n    test(){\r\n        cc.log(cc.director.getCollisionManager().enabled)\r\n    }\r\n    isEnter: boolean = false\r\n    enterPatrolArea() {\r\n        if (this.isEnter) return;\r\n        if (this.player.getPosition().sub(this.boss.getPosition()).mag() >= this.patrolArea * 3) {\r\n            return\r\n        }\r\n        else {\r\n            this.boss.getComponent('bossContol')._actionType = gameProtocol.bossControl.actionType.attack;\r\n            this.isEnter = true\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    update() {\r\n        //cc.log(this.node.children)\r\n        this.enterPatrolArea()\r\n    }\r\n}\r\n"]}